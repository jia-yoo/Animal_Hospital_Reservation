<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>견강할고양</title>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="/css/style.css" rel="stylesheet">
<link href="/css/myPetList.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Jua&display=swap" rel="stylesheet">

</head>
<body class="d-flex flex-column h-100">
<div th:replace="~{user/header :: header}"></div>
<div class="container-xl">


<h1 class="mt-3 mt-md-5 mb-3 mb-md-3">병원예약 리스트</h1>
<hr>
<table class="table table-hover manager-table align-middle">
	<thead>
		<tr>
			<td>순번</td>
			<td>병원명</td>
			<td>예약 날짜</td>
			<td>예약 시간</td>
			<td>상태/리뷰</td>
		</tr>
	</thead>
	<tbody id="tbody">
		
	</tbody>
</table>

</div>

<div th:replace="~{user/footer :: footer}"></div>


<script>
ready();
	function ready(){
		var reservList = document.querySelector("#tbody");
		reservList.innerHTML=` `;

		const xhttp = new XMLHttpRequest();
		xhttp.onload = function() {
			var cnt = 1;
			alert(this.responseText);
			const list = JSON.parse(this.responseText);
			
			list.forEach(reservation => {
				reservList.innerHTML +=`
				<tr>
					<td>${cnt++}</td>
					<td>${reservation.hospital_name}</td>
					<td>${reservation.hospital_name}</td>
					<td>${reservation.hospital_name}</td>
					<td>기타</td>

				</tr>`
				


			});
				
				
		}
		xhttp.open("get", "http://localhost:9001/api/v1/user/reservationList/"+localStorage.getItem("MemberId"));
		//xhttp.setRequestHeader("Content-type", "application/json");
		var token = localStorage.getItem('token');
		if (token) {
			xhttp.setRequestHeader("Authorization",token);
		}
		xhttp.send();
	}
	
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>