<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>견강할고양 관리자센터</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="/css/manager_style.css" rel="stylesheet">
</head>
<body class="d-flex flex-nowrap h-100">
<div th:replace="~{manager/sidemenu :: sidemenu}"></div>
<div class="w-100 p-5 h-100 overflow-auto">
	<h2>Dashboard</h2>
	<hr class="w-100"/>
	
	<div class="row">
		<div class="col-md-4"></div>
	
	<div class="col-12">
		<table class="table table-hover manager-table align-middle">
			<thead>
				<tr>
					<td>#</td>
					<td>카테고리</td>
					<td>제목</td>
					<td>날짜</td>
				</tr>
			</thead>
			<tbody id="tbody">
				
			</tbody>
		</table>
	</div>
	</div>
</div>
<script>
const token = localStorage.getItem("token");
function allList(){
	fetch("http://localhost:9001/api/v1/manager/support/qna/no-answer", {
		method : "GET",
		headers: {
	        'Authorization': `${token}`
	    }
	})
	.then(response => response.text())
	.then(data => {
		
		const objs = JSON.parse(data);
		//console.log(objs);
		let cnt = 1;
		objs.forEach(obj =>{
			let createdAtDate = obj.createdAt[0] + "-" + obj.createdAt[1] + "-" + obj.createdAt[2];
			document.getElementById("tbody").innerHTML += 
				'<tr>'
					+ '<td>' + cnt + '</td>'
					+ '<td>' + obj.category + '</td>'
					+ '<td><a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href="/qnaDetail?id=' + obj.id + '">' + obj.title + '</a></td>'
					+ '<td>' + createdAtDate + '</td>'
				+ '</tr>';
				cnt++;
		});
		
	})
	.catch(error => console.log(error));
}
allList();




</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>